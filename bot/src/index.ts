import DotEnv from "dotenv";
import { Client, Intents, TextChannel } from "discord.js";

DotEnv.config();

const client = new Client({ intents: [Intents.FLAGS.GUILDS, Intents.FLAGS.GUILD_MEMBERS, Intents.FLAGS.GUILD_MESSAGES] });

const guildId = "902322913879916554";
const roleToAdd = "Joueur RL";
const channelToSend = "bot-role";
const roleMessage = `Tu as maintenant le r√¥le "Joueur RL", bienvenue dans le tournoi !`;
const userList = "Iwose#5772,ZACM0708#3562,Rrrr#4567,R0UJE#1152,Jouzibar#0002,OsamaBenLarmin#9158,Skyora#6475,WILZZOU#3500,Kuamyu#4946,farhaaz12#5844,@PasL√†PourParler#0089,Parha#3536,latubedu29#5786,Walton#5238,Ekhalios_#5027,LycosRL#1790,Coumik#0882,Theotime#9679,breyyn#2574,Louis_bstd#9711,Yol#2117,Morgz174#0174,AlphaMelio#5740,tatiana#0924,DarkProd#9936,UnKiwi#4133,OhKeM#7795,Gooohaaan#7040,SWAT KILLER,Nicolas Tanguy#8921,Drab-Titiz#1599,HGO7873#4084,Nath#7751,! SkyMania#6011,MrMoutarde#4111,LeroyTV#5242,tanguy.tp#0905,Samiche#6677,Tak#1017,AskuroZ#1419,SRZ#4654,Extraa#6317,!\"ttv.wigintiz#6692,Smouf#1507,Mystixx Raph#7863,Hyriz#8412,M4#5375,Mylow#9595,Kitag#9124,Scal#4961,Aratey#2797,Eflammes#5208,Drein#5356,Hokabe#7786,G1NG3Rz#0210,iTaikoo#4257,AhriX#0542,Mackyu#6567,Alexstone#7753,Damky#9998,Maximus#3603,C√¥me#5037,Clemix#8167,Machiavelli#2504,SebSeb#5966,TITANToby#8678,Vicory69#6064,Connaboos#7625,Aldo Torleone#0667,OH MINOT!#9798,Tutur#5906,zayfox#4861,Lil#9744,kbniine#5752,Sikhaa#8047,zel1#2024,jiji45110#2859,TiokaRa#7871,Volt#7018,Baptiste#8539,iLoker#3588,PlyNoX#4166,Waref.#1588,ZYGM#2281,I00Preuve#8868,Batlleboss#0801,Dakz#0048,S ú·¥Ä·¥ú·¥õ·¥è#8273,Julien VIGNAU-ESPINE#5749,Kitetsu#0484,LEOOOLM#1284,Paul-Henri Gounot#0925,TokeyoS#6030,Arnaud L#7291,Sifrediiiiiiiii#2175,ReynerZ7#6193,Sanka#9313,Bastrayy#3079,Venox#7736,kgtrey1#1669,Timo#2357,Baptiste95#2532,Leow#6981,Vicoca√Øne#2978,ZeLt0rrr#2392,Vroxy#1938,Martino#1202,nasso#4991,TO#5466,Dunt#9814,Sami693#5104,Helielz√´l#6387,willk24#4936,Tiphon#8013,HarleZe#1457,amaurysanchez#5331,FuriE#7777,Kayino#7723,Alexandre.C‚ö°#6726,üî•Oxotoüî•#7802,LavaL#9240,Hory#4687,Enok#6783,Avohk#5690,Haaji#6814,phissame#6196,Youssef#1661,Boudidat#0627,OverSlek#9991,Askidox#0212,Gagarin1961#2966,Rxgulus#4318,ToRii#4586,Nounours#7211,Angyal#1050,Nexoame#6220,Freezrogue (Mat)#2414,RobertoWong#9546,Darcos#2301,Cl√©ment#6466,terapyy#9444,#InCodeWeTrust#9191,TheTMJ#4764,Kigo#7871,N1mbus#2919,AsseloTV#1199,Lutti#3799,Chef Petit Pois#2335,YaPaY#1831,Antoine#9330,DEYMO#9063,Matiyo#6966,Boussole#0308,thebighteam#9899,Cris#6882,Bastien#7436,Matsuk#3406,lebreton#4979,ITeKFR#0009,Arthur. R#0208,adricer06#7645,Beexty#1810,Worid#5817,Acropiba#7467,elgondouino#1374,grizzur#3211,Arashi#8220,Taizu#3505,Moukous#6578,Eliott#6251,CyrilleAS#4760,Swiftnessing#5642,corentin#6638,Thoomasss#2647,Kekrendi#5392,Esalix#0681,Kaillou#4819,CidoBrando#2464,Tonio Baltazar#6155,P2R#3277,clem#5717,Default#3396,apy#7422,TOTOOooOooH#6214,MiouS#9129,Drl#4997,Ryteigh#1701,sikkup#1952,Aking#4052,shiryudelapluie#3492,devilghost#7029,Soliwoh#4741,leomadz92#6408,SaltyUnicorn#9038,Mat la menace#9508,Peww#2429,Oscar#3304,SÕ•hiÕ£nÕ´taro#6891,natsuthelight#8930,iBlowd#4062,Taymez#9192,Bastou#4529,Cora#7343,NPBPM#6946,La Cuve#7961,lagentcooper#7169,Vincents9#9973,Balix#9685,Joh#9717,Art the crack.#7802,Solidus#4541,Sijel#6605,Terence Guichard#4566,VictorMonParrain#3329,penta.#0005,Arkhan#2938,Psyko0_#3773,√àsska#2616,Alex_#5089,REX.#6500,Ztabyx#5952,Nono#6167,Benjamin.#0556,LePo#9218,Azix#2432,yacer#2474,MattiZZZ#2617,Mathias_rd#2464,Mous#4806,Amortiix#3523,Œü Hugo Œø Œ≠ŒæœÖœÄŒΩŒøœÇ#0925,Disciple Uchiwa#7611,Maram#1577,AD#4562,Rochise#0942,Florian / Wyde#5700,tmega91#4903,GOAG SkyeINC#5843,GamingComunity#7642,YuBii#8997,Kanami Etou#4746,mia des forets#1080,Didelo#7927,Dracxeno#2749,Lil God#0728,ZS_Laviateur_QC#4761,dedeww#6617,Yanis#0916,Rymino#0189,maldin#6680,Viirtuae#3248,DeathScythe#4122,Neroz.#4957,Mistrael#0267,Gh0sT#8730,Lil Hell evn#7782,happly#8119,lololegros#3450,Skanarin#0877,alexnadre#1599,Ganeuh#4522,Senku#7764,SH4D0W#1701,gyroskan#1107,Luckus77#5783,WizzY#3489,Bacon Pancakes#4792,iamforix#1833,sampopi#1251,LAM#8491,Adriix#6577,Froze#1081,Monkey. D .Nano#5463,Phenixfire360#9604,Tipoune Le Kikor#7908,SNW drvlt#4987,ECHEkatberry#8180,nazario limosani#5820,zeko#7061,Xaluks#2507,Honeee#1024,crackiiito#9474,Domezyx#5145,arouf gangsta#9008,Melc#7055,Elmos#1809,Harpetotobg#7399,InfinityEren971#9318,Akayama#7431,klaaz_#8694,Guilty#4201,Wally#1370,Loan#6501,Boltaax#0301,ti.LHD#4830,ATPHAX#5247,Quent1500#5510,PoloGtree#5381,Kun#8432,Axel#5168,TheoXic#7627,M2tbe#2567,Psyyko.#9783,Ced#4976,ZENITSU#9137,Q_PAG#2600,Jr#7896,Tolione#8466,Renax#2719,Vallaser#7166,DRACOS#1745,Mimic#1569,Bastien#2754,NaOH#5770,Mathis_d09#8591,_ArCheRy#4069,N—îrœÉ.#6581,Wylohn#4247,elouen ginat#1845,blu#7063,Bastien#6276,Alan_dmg#6529,Joshiwa#5615,Romain#3228,Narkos_MRK#2985,Weed0w#2050,RaysDZ#1535,Hugorn#2952,Irony#9742,Brokoli#9546,Coni#6733,Watt974#1370,Lemarnss#0009,PaulB#0986,Flofloo#0068,rico#9227,Supertibo8#1668,NicolasC#8894,Wayry#9079,Akkemy#5693,May_T#1393,xerneas02#4242,f√£yli#8340,Fevronos#7905,NK#6905,NexFord#6819,Atshoumm#1378,The Smoothy One#6062,rone#6612,ItetsuLaTable#8830,Aztym#1485,roropsg#7956,Mr Red Cow#9317,-Pr0xStar.D#3405,Raiiser#3470,Rocketeuse#2893,RedShotSmqked#3295,Khenzol,Ecureuilenrage#3563,–Ø√êZ#5389,ChairTic#5223,Soufiane#0758,VeryLazy_#0739,Fillae#8133,Tibo#7783,ùíÆùíæùìá. Ôº≠ÔºìÔΩÉÔΩÅÔΩéÔΩâÔΩòÔΩò LÃ∂ÃøÕùoÃ∂ÕÄÕÉlÃ∏ÕòÃÜiÃµÃÖÃÜ„Åß„Åô#4515,ShootMeFirst01#9952,Bastoine#6778,Karma ‚ô†#0003,Th√©mis _üôÉüí¢#0824,[eSportFR] mathieu10035#9443,L√©o!#2009,dadou_955#4864,Remi#7612,Mougi#9013,jerems.ch#2190,Dorian#1024,Reiimus#7166,bastjog#7115,blacklotus811#9090,Lukx#6860,le pit#0126,V!RTU#0612,JsPlay#6334,Krikol#9071,thomazidu31#9926,Tahmid#9383,ExoM#0001,Oniriik#8686,Tomlvr#3118,Munrekt#8225,besabd#0238,·¥† ü·¥Ä·¥Ö…™·¥Ä#9470,2KCzZEUSs23#8443,Vinvin#9481,oqiiW#4417,Brada#6659,ALvarez Jean-Baptiste#0991,NatzYT#5782,Jawad23#4697,Jhin-Ary#1154,alleksy#3746,natsu2du56#8143,Warzen#2575,Vaktou#9925,TiBabu#4856,AgentAlpha001#7748,MookTheSurvivor#2439,Adigoth#5060,baptistepizzo#6238,ekipaumax#6670,jos#9829,xxFlixzyy#5022,Nathanx88,‰∫¨ÂçÅÈÉé#1261,Octobak#2409,Ca pick, Patrick#4752,maxibi#6747,Raffael#1907,Elypse | I_Kuuby_#7923,Lidgeno#9210,thermo_maitre#0715,Olympe Moguky#5126,Chris Bram#9530,SPACE_Canarias#5613,KillerBunny66#3102,MyTadaa#2659,Hecate#7381,Glouspf#7129,TOTOV;)#8306,skyvix#7967,Tunoy#2835,L2Poul√®#7851,Spg_Alex#7052,Antho#0225,Vadzou#5607,fabiensamj#4364,Curroch#6573,Tech#4895,Zadi#5951,Nat#1094,CorentinKern#5185,Darclo#1967,ElDozo#7667,HashimG#3977,R3ivax_#2925,AnthonyP#8123,Monster_IrRoXx#5720,Xeax#6241,Hart#3060,AvelRL#2287,Edouard#8616,jos√©pougnette#2085,classiiik#0643,Tutur#7757,bastien58-17620#8301,MaxxD.#7483,BALOX#0356,Dx#2765,Bastien#8264,JokerMaster#7647,ZeroG NootNoot#6953,Fromiel#9886,Adrien.krief#6548,Baptiste Morcel#8971,Arthur ‚öî#6694,Moonfish‚Ñ¢#1312,Romain C#8549,nthn#0417,KcodioSs#2300,Lucouscous#4415,20hugo#7482,Fritixx#8718,Feno#5391,Surwin#9066,Aze#7576,Malikoush#4290,Ptimouss#7368,SeyawZ#4652,Seigneur#2412,Vee#2233,Frazy#3023,DEPMAX#4303,ThedridriX#5088,mash.#6582,zexceed#9631,corria#2101,Blumor#8600,Antoine#3987,gazzarii#4381,BT Lilas#2600,FreeZyLigHtNinG#2293,Lenine Black#1034,Wazaby#9526,ClownMangue#8534,Crytismo#6441,Titi77#0151,Zikam#9292,Cochonou#7200,kubah#7436,Snaxx#8799,Nytro St;>rm#3641,WhyDoubleYou#1650,FreeZix#1057,NimixaM#2191,Mishaa#2421,Luunatic.#4002,La_Tulipe#0060,IceTeaCitronVer#2758,JCSaucisse#1602,Virgil#2207,Lehyan#7499,Sliderinho#6662,see_saw#6111,Marc zanin#1013,üçØ ùô∑ùöòùöóùöéùö¢ üçØ#1360,Aberos#1196,,paxel#3020,YowStaz#9888,Zeclown_#1933,PAtoPEsto#9615,Sha–æ#6362,SamSam#8147,Khindred#9322,Tarkov#3132,MenToz#8131,dina#5204,Oncle Ben's#4680,Le boss#0810,,Silu#9665,Djmartino36#2518,mathieu.lct#5664,Nilexx#1901,Œ® NielsElit#1604,#TRISTAN8440,FlinkiiS#8801,LORD Ey_chiro#8263,Mister joke#2498,Touxoo#1919,Black Chameau#0010,AzRo4d#5076,leop45#7750,bgmax#2229,Vincent S#8461,Nithingale#7167,Huguinho#0789,warnadoo#8955,Kil ooo#1234,Enzoo#9950,JeaKss#7821,Denis33#9009,F√©lixLeBG#2667,saumaa#0197,Bakko#2855,,„ÅóO≈®ƒ¨„Çâ#6349,[TTV]luckylucklexplorateur#2067,Aza#2683,Antho#4323,HayRoX#0295,Lukys#9650,GonGabo#5096,Tanguy#5938,Woxifer#3602,didi1019#4389,Raewen#4966,Valentino7711#9650,Laenthis#6600,dydi02#9599,Vic.L#2091,Axiloz#8522,Hugoledozo#3084,G L M#9210,falk#2596,Sora#3698,Augustin#8348,Kenzo#2536,Hxncus#9660,VALIVALOO#0334,,N√©phalio#7495,Mattheo#9346,patdefrui#8793,Ice-hawk#3650,Hatsuke#4323,Mad#1689,Skynoxx#1008,GOOONEEE#1016,Pythan76#9270,JawRiSeR#3998,Denkurai#3572,EnzoKilm#0003,‚ï≤‚éù‚ßπ‚ï≤‚éù‚ßπ Husk ‚ß∏‚é†‚ï±‚ß∏‚é†‚ï±#4936,Ace-Wd#9747,Smirn#2204,mutulus#4437,Granlou#9247,Julien#6003,JeanP#7090,Nassim Bouhassoun#4096,JeSuisIncognito#8301,Nassim ‚≠ê#5460,Phoenix2Feu#7976,whou#5330,Minatsuki#6149,retoucui#5664,Yeti#0886,Elio#5043,ReZTeK#2938,L√©opol#6551,eclctique#8551,Dirux#5045,Hugorsl#9535,Niout#3761,TomA#9629,Alex Ridisk#2564,Phouille#0727,,il-castellano#8596,Louis\"#9416,quentinfeve#1721,Tschux#7304,ruuffo#4812,KaiserLayl#9403,nonozz#9457,L√©o#1680,Aldaron#9230,N…ê û·¥âs áo…π…Ø#0069,Dax#7422,Fabio.Ol#1007,Sonic Le Gamer#9978,Germain#5488,Grayhar#3774,mmmmcoco#5081,Kryolion#6282,KALIAN#9110,Lampaderise#5492,La Quille#6102,zamen_92#7912,Edmo#4448,ervem/hugo#3711,BerengerLF#8624,BrunoM#8759,Solidus#4541,KAL√òM#9989,Cendre#6617,La girouette#8254,nathan#8713,Sloiiac#5114,Sura#6918,Babasage#9939,Louis R#3455,Blazz#0518,AdriZer#8555,Thibaut#8524,Mat√©o#7075,Aade#6723,Ôæ∂„Ñö„Çâ“ú„Ñö‰πô‰πô#6065,Nathan.A#9341,Tomitom#1483,Lace_Rocket#4771,Kidax#7311,Twitch.tv/jupilimix#8792,Verzys#1623,ZeFy#8726,SachaH#3398,Xthe0X#4739,Kylian#1693,Harlock#3956,Guenks#7708,Eklips BZH#8951,Gotenks1552#9798,TYCO#7176,Saykow17#5393,Craptree1#4574,Gradou#5943,Le Marsien#4005,AyKox#6796,Iwann#4078,johan#5671,Loris#8982,Jreum#2232,Loan#1005,#Eros2294,barnabe#6530,fruixy#3570,Sohra#8994,Alexandre Girard#5488,VenoomLeFou#3358,Shoumi22#7649,Clem#5994,Youri#7789,Ad alias Salapute#5238,Lex#9938,Druide951#8852,Darkrozh#6150,AleexSaan#8054,Œµnz√∏#0229,ArKeZ#2964,Handler#3031,Blazy#5887,GodSaveTheYol#7433,Enzu#0240,Fall#2466,Nacks - Nadim#1422,,Waaathieu#1222,,@SNW Amoztrix#5638,ZAYKUNOKO#2119,Azkar#5899,Reyess#4386,GregDeRiz#7479,Malmorthius#1885,DomeSixers#6175,YML#5755,√úNKN√òW√ë#0421,Besstial#3102,ze-flash#7554,Rafael92#4403,noah_xye#2867,Vortex7a#4077,T4FT#5073,Slyex#6429,adam 20-1#7697,sacha#7366,Alrax_#6331,Glandoulf#8790,FORCEDUCHACAL#4007,Aster#6918,! Panini#4910,flechtival#4728,V√©v√©#6844,lyderkass#4498,kylian.trc#8280,Hooups#6769,WiP#6479,Ruben#6807,Maximilien#9653,Erwan Gross#9344,LŒûBron”æ#0119,r0dvin#7673,tho5959#4217,Nawfel#8757,Absolute „ÉÑ#3172,Adelin#2189,PhilippeEtchebest#9655,MathieuS#1433,cabo#1855,happy__poney#1600,Dzeau üå∏#2941,Aur√©lien BERTAIL#3962,Antarrtick#1543,Evox54#6152,||-weniox-||#0042,PKing-nino#5652,Crouton#2664,ANDTMatteo#5843,Waks#9974,_BraqueurEnRoller_#3943,XenoblasDX#8896,Qu3nT1N#8846,No√©.Abcy#8344,'Incognito'#7387,Mikachu#9899,Jarx | Rondelito#2685,clem_v#1755,xXSUL56#4918,-¬ªWarLocK¬´-#6174,Rulioo#2270,Valentin__#4377,Gowtyx#9714,alexgsrx93#5475,Powaquila#5467,Thomas#5153,Max'#3097,Arwenlor#8251,NaffLow#4990,EkinoxFx#5836,,Lolektro#8995,_Mr_stone#7555,WshMonZincou#1129,Le Z#7785,Brice#1556,Crouzz#2539,snaqueyes#2235,Pastoredu59#6771,Weel#3997,orochi#1489,AyWiZz#7806,MrfOoXXx#7126,okpi#0485,Clement#8715,Kozow.#6355,RabdelRamouq#9198,Antear Dis#9864,benjich#9712,Hel1knight#2169,Kaiorga#7566,rayouu#8218,·¥õ·¥Ä Ä·¥á·¥ã#0001,itachi;)#3734,Wellan#4277,Wizong#3684,Any#9704,mapamboli75#1447,Ignis#3571,May4837#3657,DarkUnicorn#7997,Xenyt#2009,Thems#7505,Shyranuit#3137,Quentin Aurignac#2349,SlyderW#0512,Zaykoz#4054,Mathieu#9472,draguion#8365,Raystrem#1562,Sualtach2#6049,Miraj#1719,Le Chibre Laser#5557,Demsdansl'binks#3366,,Ewan#0117,,Noah ayat#5957,ova6ion#2044,DARZACQ#9685,Dark_Phoenix04#2358,Callmesenpai#8740,Niwost#3253,Kais#6580,,legrand Mpascal#9495,Menje1Paume#3669,Ir-ene#1182,Noukou#2074,Twisted#1180,Destro007#5292,Skyzz#8015,Funny Bear#4534,NeoX#3538,nicochanfusse#6057,BaSsilA,Naecon#0927,reyno_gaming#1922,Neymar#0461,TLZZ Okey#8436,coubertzonz#4847,Zeynn#8479,ShifooQ#6211,Uziwayne#7836,InfiniX Group#1939,Valow#1920,Mesco7.#7978,Jyster#1898,FLS Swayze On YTB#2723,Martin RR#4775,Le_Petit_Igor#4131,sxdbat#2834,Legio#8938,Yzx-5-#1771,r4y4n_sbr#0480,StarBeard#1310,Boby_Dance#1774,Axel-937#4851,waxby#4095".split(",");

client.on("ready", async () => {
    console.log(`Logged in as ${ client.user?.tag }!`);

    const guild = await client.guilds.fetch(guildId);
    const members = await guild.members.fetch();
    const roles = await guild.roles.fetch();
    const channels = await guild.channels.fetch();

    const role = roles.find((role) => role.name === roleToAdd);
    const channel = channels.find((channel) => channel.name === channelToSend) as TextChannel;

    for (const member of members) {
        const user = member[1].user;

        if (!userList.includes(user.tag)) {
            continue;
        }

        const hasRole = !!member[1].roles.cache.find((role) => role.name === roleToAdd);

        if (hasRole) {
            const index = userList.indexOf(user.tag);
            if (index !== -1) {
                userList.splice(index, 1);
            }
            continue;
        }

        await member[1].roles.add(role?.id as string);
        await channel.send(`${ user.toString() } - ${ roleMessage }`);

        console.log(user.tag);
    }

    console.log("Done!");
    console.log(JSON.stringify(userList));
});

client.login(process.env.CLIENT_TOKEN).then(() => {
    console.log("Connected");
});
